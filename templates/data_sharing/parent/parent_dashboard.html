{% extends 'base.html' %}

{% block content %}
<div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold mb-6">Gyermekeim Áttekintője</h1>
    
    {% if children_data %}
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for data in children_data %}
                <div class="bg-white shadow-lg rounded-lg p-6 border-t-4 border-indigo-500 hover:shadow-xl transition duration-300">
                    <h2 class="text-xl font-semibold mb-2 text-indigo-700">
                        {{ data.profile_data.last_name }} {{ data.profile_data.first_name }}
                    </h2>
                    
                    <p class="text-sm text-gray-500 mb-4">
                        <i class="fas fa-birthday-cake mr-2"></i> Szül. idő: {{ data.profile_data.date_of_birth }}
                    </p>
                    
                    <div class="space-y-2 text-gray-700 text-sm">
                        <p><strong>Klub:</strong> {{ data.athlete_club.name|default:"Nincs hozzárendelve" }}</p>
                        <p><strong>Sportág:</strong> {{ data.athlete_sport.name|default:"Nincs hozzárendelve" }}</p>
                    </div>
                    
                    <hr class="my-4">
                    
                    <div class="flex justify-between items-center text-sm">
                        {% if data.last_weight %}
                            <p class="text-gray-600">
                                Utolsó súly: <strong class="text-green-600">{{ data.last_weight.morning_weight }} kg</strong>
                            </p>
                        {% else %}
                            <p class="text-gray-600">Nincs rögzített súly.</p>
                        {% endif %}
                    </div>
                    
                    <hr class="my-4">

                    <a href="{% url 'data_sharing:parent_athlete_details' athlete_id=data.athlete_object.id %}"
                       class="mt-4 w-full block text-center bg-indigo-600 text-white py-2 px-4 rounded hover:bg-indigo-700 transition duration-300">
                        Részletes adatok megtekintése
                    </a>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4" role="alert">
            <p class="font-bold">Nincs megjeleníthető gyermek</p>
            <p>Jelenleg nincs jóváhagyott kiskorú sportoló szerepkör hozzárendelve Önhöz.</p>
        </div>
    {% endif %}
</div>
{% endblock content %}